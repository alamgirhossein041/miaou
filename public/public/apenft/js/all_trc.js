class ImageItem{constructor(){this.isVideo=!1}}let isMobile=!1,redirect={boo:!1,lan:"en",id:0};var picData,authorData,newsData,boxData,camPos,menuData,resourceData,menuMax;function getImageArrayData(t){let n=[];for(let[e,a]of resourceData.entries())t.map((t,e)=>{if(a.id==t){let e=new ImageItem;e.id=Number(t),e.img="upload/"+a.img,e.video=a.video,""!=a.video&&(e.isVideo=!0),n.push(e)}});return n}function getImageData(e){for(var[t,a]of resourceData.entries())if(a.id==e)return"upload/"+a.img;return""}!function(){window.device.mobile()&&(isMobile=!0);let e="";var t,a;location.hash&&(e=location.hash),0<location.href.indexOf("m_trc.html")?isMobile||(location.href="index_trc.html"+e):isMobile&&(location.href="m_trc.html?"+ window.location.search.substr(1)),location.hash&&(e=e.substr(1,e.length),"cn"!=(t=e.substr(0,2))&&"en"!=t||(a=Number(e.substr(2)),redirect.boo=!0,redirect.lan=t,redirect.id=a))}(),$.ajax({url:"data/resource.json",async:!1,success:function(e){resourceData=e}}),$.ajax({url:"data/menu.json",async:!1,success:function(e){menuMax=(menuData=e).en.length}}),$.ajax({url:"data/paint.json",async:!1,success:function(e){e.map((e,t)=>{e.thumb&&""!=e.thumb&&(e.thumb=getImageData(e.thumb)),e.img=getImageArrayData(e.img.split(","))}),picData=e}}),$.ajax({url:"data/author.json",async:!1,success:function(e){e.map((e,t)=>{e.img=getImageData(e.img)}),authorData=e}}),$.ajax({url:"data/news.json",async:!1,success:function(e){newsData=e}}),$.ajax({url:"data/box.json",async:!1,success:function(e){boxData=e}}),$.ajax({url:"data/camera.json",async:!1,success:function(e){camPos=e}});var three,THREE=window.THREE||{};function showPic(e,t,a=!0){e=e.getClientRects()[0];isMobile?($("#pic_bg").css("left",-h+e.x),$("#pic_bg").css("top",-h+e.y)):($("#pic_bg").css("left",1.5*-w+e.x),$("#pic_bg").css("top",1.5*-w+e.y)),$("#pic_layer").css("display",""),$("#pic_layer").css("opacity","1"),$("#pic_bg").css("border-radius","50%"),$("#pic_bg").addClass("animated zoomIn"),a?(fpc.phyTouch.enabled=!0,fpc.enabled=!0,document.getElementById("slider").style.display=""):(fpc.phyTouch.enabled=!1,fpc.enabled=!1,document.getElementById("slider").style.display="none"),document.getElementById("page").innerText=t+"",gsap.fromTo(document.getElementById("pic_content"),.5,{opacity:0},{delay:.5,opacity:1,onComplete:()=>{$("#pic_bg").css("border-radius","0%")}}),fpc.to(t)}function closeContent(){gsap.fromTo(document.getElementById("pic_layer"),.5,{opacity:1},{opacity:0,onComplete:()=>{$("#pic_layer").css("display","none")}})}function getDiv(e=""){let t=document.createElement("div");return t.className=e,t}function getSpan(e=""){let t=document.createElement("span");return t.className=e,t}function initMenu(){let t=document.getElementById("menu_content");for(var n in menuData){let e=document.createElement("vue");e.className=n,n.toUpperCase()!=Language&&(e.style.display="none");let a=document.createElement("ul");for(var[i,l]of menuData[n].entries()){let e=document.createElement("li");e.setAttribute("cid",l.id);let t=`<sup>${String(i+1).padStart(2,"0")}</sup><span>${l.tit}</span>`;l.n&&(t+='<img src="img/ico_new.png" />'),-1==l.id&&(t=`<a href="${l.link}" target="_blank">${t}</a>`),e.innerHTML=t,a.appendChild(e)}e.appendChild(a),t.appendChild(e)}}!function(){let i=document.getElementById("pic_content");var y,e=picData.length;for(let n=0;n<e;n++){let m=picData[n],e=getDiv("animated section flex_row"),t=getDiv("section-main"),a=getDiv("pic animated");a.setAttribute("data-delay","200"),a.setAttribute("data-show","zoomIn"),a.innerHTML=m.img[0].img,t.appendChild(a);let u=getDiv("pic_desc");if(isMobile){let t=getDiv("pic_desc_content"),a=getDiv("author animated");a.setAttribute("key",m.id),a.setAttribute("data-delay","500"),a.setAttribute("data-show","fadeInRight20");let e=getSpan("en");e.innerHTML=m.author,a.appendChild(e);let n=getSpan("cn");if(n.innerHTML=m.cauthor,a.appendChild(n),t.appendChild(a),findData(authorData,m.aid)){a.className="author animated link",a.onclick=()=>{showAuthor(m.aid)};let e=getDiv("ar"),t=new Image;t.src="img/pic_ar.png",e.appendChild(t),a.appendChild(e)}let i=getDiv("title animated");i.setAttribute("data-delay","600"),i.setAttribute("data-show","fadeInRight20");let l=getSpan("en");l.innerHTML=m.title,i.appendChild(l);let s=getSpan("cn");s.innerHTML=m.ctitle,i.appendChild(s),t.appendChild(i);let o=getDiv("behind animated");o.setAttribute("data-delay","700"),o.setAttribute("data-show","fadeInRight20");let d=getSpan("en");d.innerHTML="STORY BEHIND THE PRICE:",o.appendChild(d);let p=getSpan("cn");p.innerHTML="作品背景：",o.appendChild(p),t.appendChild(o);let r=getDiv("story animated");r.setAttribute("data-delay","800"),r.setAttribute("data-show","fadeInRight20");let c=getSpan("en grey2");c.innerHTML=m.story,r.appendChild(c);let g=getSpan("cn grey2");if(g.innerHTML=m.cstory,r.appendChild(g),t.appendChild(r),m.sold&&1==m.sold){let e=document.createElement("div");e.className="soldDiv",e.innerHTML=`<span class="soldDate animated" data-delay="1000" data-show="fadeInRight">${m.sold_date}</span>
						<span class="en sold animated" data-delay="1200" data-show="fadeInRight20">${m.esold}</span>
						<span class="cn sold animated" data-delay="1200" data-show="fadeInRight20">${m.csold}</span>`,t.appendChild(e)}u.appendChild(t);let h=getDiv("bottom animated");if(""!=m.price){let e=getDiv(),t=getSpan("animated");t.setAttribute("data-delay","1500"),t.setAttribute("data-show","fadeInRight20"),t.style.whiteSpace="nowrap";let a=getSpan("en grey");a.innerHTML="PRICE REALISED:",t.appendChild(a);let n=getSpan("cn grey");n.innerHTML="成交价格：",t.appendChild(n),e.appendChild(t);let i=getSpan("animated");i.setAttribute("data-delay","1600"),i.setAttribute("data-show","fadeInRight20");let l=getSpan("en");l.innerHTML=m.price,i.appendChild(l);let s=getSpan("cn");s.innerHTML=m.cprice,i.appendChild(s),e.appendChild(i),h.appendChild(e)}if(""!=m.address){if(""!=m.tid){let e=getDiv(),t=getSpan("animated grey");t.setAttribute("data-delay","1700"),t.setAttribute("data-show","fadeInRight20"),t.innerHTML="TOKEN ID:",e.appendChild(t);let a=getSpan("animated");a.setAttribute("data-delay","1800"),a.setAttribute("data-show","fadeInRight20"),a.innerHTML=m.tid+"",e.appendChild(a),h.appendChild(e)}let e=getDiv(),t=getSpan("animated");t.setAttribute("data-delay","1900"),t.setAttribute("data-show","fadeInRight20");let a=getSpan("en grey");a.innerHTML="CONTRACT ADDRESS:",t.appendChild(a);let n=getSpan("cn grey");n.innerHTML="合约地址：",t.appendChild(n),e.appendChild(t);let i=getSpan("animated");i.setAttribute("data-delay","2000"),i.setAttribute("data-show","fadeInRight20");let l=document.createElement("a");l.href=m.address,l.target="_blank",""!=m.link2?l.innerHTML=m.link2:l.innerHTML=m.address,i.appendChild(l),e.appendChild(i),h.appendChild(e)}u.appendChild(h)}else{let t=getDiv(),e=getDiv("author animated grey");e.setAttribute("key",m.id),e.setAttribute("data-delay","500"),e.setAttribute("data-show","fadeInRight20 s2");let a=getSpan("en");a.innerHTML=m.author,e.appendChild(a);let n=getSpan("cn");n.innerHTML=m.cauthor,e.appendChild(n),t.appendChild(e),findData(authorData,m.aid)&&(e.className="author animated grey link",e.onclick=()=>{showAuthor(m.aid)},y=getDiv("ar"),e.appendChild(y));let i=getDiv("title animated");i.setAttribute("data-delay","700"),i.setAttribute("data-show","fadeInRight20 s2");let l=getSpan("en");l.innerHTML=m.title,i.appendChild(l);let s=getSpan("cn");s.innerHTML=m.ctitle,i.appendChild(s),t.appendChild(i);let o=getDiv("behind animated");o.setAttribute("data-delay","900"),o.setAttribute("data-show","fadeInRight20 s2");let d=getSpan("en");d.innerHTML="STORY BEHIND THE PRICE:",o.appendChild(d);let p=getSpan("cn");p.innerHTML="作品背景：",o.appendChild(p),t.appendChild(o);let r=getDiv("story animated grey");r.setAttribute("data-delay","1100"),r.setAttribute("data-show","fadeInRight20 s2");let c=getSpan("en");c.innerHTML=m.story,r.appendChild(c);let g=getSpan("cn");if(g.innerHTML=m.cstory,r.appendChild(g),t.appendChild(r),m.sold&&1==m.sold){let e=document.createElement("div");e.className="soldDiv",e.innerHTML=`<span class="soldDate animated" data-delay="1500" data-show="fadeInRight s2">${m.sold_date}</span>
						<span class="en sold animated" data-delay="1700" data-show="fadeInRight20 s2">${m.esold}</span>
						<span class="cn sold animated" data-delay="1700" data-show="fadeInRight20 s2">${m.csold}</span>`,t.appendChild(e)}u.appendChild(t);let h=getDiv("bottom animated flex_column");if(h.setAttribute("data-delay","2000"),h.setAttribute("data-show","fadeInRight20 s2"),""!=m.price){let e=getDiv(),t=getSpan("en grey");t.innerHTML="PRICE REALISED:",e.appendChild(t);let a=getSpan("cn grey");a.innerHTML="成交价格：",e.appendChild(a);let n=getSpan("en");n.innerHTML=m.price,e.appendChild(n);let i=getSpan("cn");i.innerHTML=m.cprice,e.appendChild(i),h.appendChild(e)}if(""!=m.address){if(""!=m.tid){let e=getDiv(),t=getSpan("grey");t.innerHTML="TOKEN ID:",e.appendChild(t);let a=getSpan();a.innerHTML=m.tid+"",e.appendChild(a),h.appendChild(e)}let e=getDiv(),t=getSpan("en grey");t.innerHTML="CONTRACT ADDRESS:",e.appendChild(t);let a=getSpan("cn grey");a.innerHTML="合约地址：",e.appendChild(a);let n=getSpan("address"),i=document.createElement("a");i.href=m.address,i.target="_blank",""!=m.link2?i.innerHTML=m.link2:i.innerHTML=m.address,n.appendChild(i),e.appendChild(n),h.appendChild(e)}u.appendChild(h)}t.appendChild(u),e.appendChild(t),i.appendChild(e)}document.getElementById("page_max").innerText=e+""}(),function(){let e=document.getElementById("card");var a,n=picData.length,i=Math.ceil(n/4);for(let h=0;h<=i;h++){let t=getDiv("pic_container");isMobile||0<(a=4*h+4-n)&&(t.style.width=25*(4-a)+"%"),0!=h&&(t.style.display="none");for(let e=0;e<4;e++){let c=4*h+e;if(c>=n)break;var m=picData[c];let g=getDiv();if(isMobile){0==h?g.className="animated pic_list fadeInRight":g.className="animated pic_list";let a=getDiv("pic_div"),e=new Image;if(m.thumb&&""!=m.thumb?e.src=m.thumb:e.src=m.img[0].img,a.appendChild(e),a.onclick=()=>{showPic(a,c)},m.sold&&1==m.sold){let e=new Image;e.src="img/sold.png",e.className="sold en",a.appendChild(e);let t=new Image;t.src="img/sold_cn.png",t.className="sold cn",a.appendChild(t)}g.appendChild(a);let t=getDiv("pic_content"),i=getDiv(),n=getSpan("upper bold en");n.innerHTML=m.title,i.appendChild(n);let l=getSpan("upper bold cn");l.innerHTML=m.ctitle,i.appendChild(l);let s=getSpan("en");s.innerHTML=m.author,i.appendChild(s);let o=getSpan("cn");if(o.innerHTML=m.cauthor,i.appendChild(o),""!=m.price){let e=getSpan("grey en");e.innerHTML="PRICE REALIZED:",i.appendChild(e);let t=getSpan("grey cn");t.innerHTML="成交价格：",i.appendChild(t);let a=getSpan("bold en");a.innerHTML=m.price,i.appendChild(a);let n=getSpan("bold cn");n.innerHTML=m.cprice,i.appendChild(n)}if(""!=m.address){let e=getSpan("grey en");e.innerHTML="CONTRACT ADDRESS:",i.appendChild(e);let t=getSpan("grey cn");t.innerHTML="合约地址：",i.appendChild(t);let a=getSpan("address"),n=document.createElement("a");n.href=m.address,""!=m.link2?n.innerHTML=m.link2:n.innerHTML=m.address,n.target="_blank",a.appendChild(n),i.appendChild(a)}t.appendChild(i);let d=getDiv(),p=document.createElement("button");p.className="en",p.innerHTML="LEARN MORE",p.onclick=()=>{showPic(a,c)},d.appendChild(p);let r=document.createElement("button");r.className="cn",r.innerHTML="了解更多",r.onclick=()=>{showPic(a,c)},d.appendChild(r),t.appendChild(d),g.appendChild(t)}else{let e=getDiv(),a=getDiv(),t=new Image;if(m.thumb&&""!=m.thumb?t.src=m.thumb:t.src=m.img[0].img,a.appendChild(t),m.sold&&1==m.sold){let e=new Image;e.src="img/sold.png",e.className="sold en",a.appendChild(e);let t=new Image;t.src="img/sold_cn.png",t.className="sold cn",a.appendChild(t)}e.appendChild(a);let n=getSpan("upper bold en list_title");n.innerHTML=m.title,e.appendChild(n);let i=getSpan("upper bold cn list_title");i.innerHTML=m.ctitle,e.appendChild(i);let l=getSpan("en grey2");l.innerHTML=m.author,e.appendChild(l);let s=getSpan("cn grey2");s.innerHTML=m.cauthor,e.appendChild(s),e.className="pic_div",e.onclick=()=>{showPic(e,c)},g.appendChild(e);let o=getDiv("pic_list_content");if(""!=m.price){let e=getSpan("grey en");e.innerHTML="PRICE REALIZED:",o.appendChild(e);let t=getSpan("grey cn");t.innerHTML="成交价格：",o.appendChild(t);let a=getSpan("bold en");a.innerHTML=m.price,o.appendChild(a);let n=getSpan("bold cn");n.innerHTML=m.cprice,o.appendChild(n)}if(""!=m.address){let e=getSpan("grey en");e.innerHTML="CONTRACT ADDRESS:",o.appendChild(e);let t=getSpan("span");t.className="grey cn",t.innerHTML="合约地址：",o.appendChild(t);let a=getSpan("address"),n=document.createElement("a");n.href=m.address,n.target="_blank",""!=m.link1?n.innerHTML=m.link1:n.innerHTML=m.address,a.appendChild(n),o.appendChild(a)}let d=document.createElement("button");d.className="en",d.innerHTML="LEARN MORE",d.onclick=()=>{showPic(e,c)},o.appendChild(d);let p=document.createElement("button");p.className="cn",p.innerHTML="了解更多",p.onclick=()=>{showPic(e,c)},o.appendChild(p),g.appendChild(o)}t.appendChild(g)}e.appendChild(t),document.getElementById("page_count").innerText=`1 / ${i}`}}(),function(){let c=document.getElementById("authorList");var e=authorData.length;for(let r=0;r<e;r++){let e=authorData[r],t=getDiv("authorBox"),a=getDiv("authorImg"),n=new Image;n.src=e.img,a.appendChild(n),t.appendChild(a);let i=getDiv("authorName bold"),l=getSpan("en");l.innerHTML=e.author,i.appendChild(l);let s=getSpan("cn");s.innerHTML=e.cauthor,i.appendChild(s);let o=getDiv("desc grey"),d=getSpan("en");d.innerHTML=e.desc,o.appendChild(d);let p=getSpan("cn");p.innerHTML=e.cdesc,o.appendChild(p);var g=getDiv("ar");if(isMobile){let e=getDiv("authorContent");e.appendChild(i),e.appendChild(o),e.appendChild(g),t.appendChild(e)}else t.appendChild(i),t.appendChild(o),t.appendChild(g);t.onclick=()=>{showAuthor(e.id)},c.appendChild(t)}isMobile||$("#authorList").dragscroll({direction:"scrollLeft"})}(),function(){let n=6;isMobile&&(n=8);let g=document.getElementById("newsList"),i=1,l=newsData.length,s=Math.ceil(l/n),o=$(".p9_main .page_count")[0],d=[],h=document.createElement("ul");if(1<s){let e=document.createElement("li");e.className="ar";let t=new Image;t.src="img/list_ar.png",e.appendChild(t),h.appendChild(e);for(let t=0;t<s;t++){let e=document.createElement("li");e.innerText=String(t+1),d.push(e),h.appendChild(e),e.onclick=()=>{p(t+1),changeLanguage(Language)}}let a=document.createElement("li");t=new Image,t.src="img/list_ar.png",a.appendChild(t),h.appendChild(a),e.onclick=()=>{p(i-1),changeLanguage(Language)},a.onclick=()=>{p(i+1),changeLanguage(Language)},o.appendChild(h)}else o.style.display="none";let p=a=>{if(!(a<1||a>s)){if(i=a,$(g).empty(),d.map((e,t)=>{e.className=t==a-1?"active":"normal"}),1<s)switch(a){case 1:h.children[0].className="disable",h.children[s+1].className="";break;case s:h.children[0].className="",h.children[s+1].className="disable";break;default:h.children[0].className="",h.children[s+1].className=""}var p,r,e=(a-1)*n,t=Math.min(l-e,n);for(let d=e;d<e+t;d++){let e=newsData[d],t=document.createElement("li"),a=getDiv("newsDate");e.time&&(a.innerHTML=(p=e.time,r=void 0,r=p.indexOf("-"),p.substr(0,r)+"<br/>"+p.slice(r+1))),t.appendChild(a);var c=/<img [^>]*src=['"]([^'"]+)[^>]*><br[^>]*>/gi;let n=document.createElement("div"),i=getSpan("newsTitleEN en");i.innerHTML=e.title,n.appendChild(i);let l=getSpan("newsTitleCN cn");l.innerHTML=e.title_cn,n.appendChild(l);let s=getSpan("newsContentEN en");e.content&&(s.innerHTML=e.content.replace(c,"")),n.appendChild(s);let o=getSpan("newsContentCN cn");e.content&&(o.innerHTML=e.content_cn.replace(c,"")),n.appendChild(o),t.appendChild(n),t.onclick=()=>{showNews(e.id)},g.appendChild(t)}}};p(1)}();let w=window.innerWidth,h=window.innerHeight,scale=h/64;function shuffle(t){var a;for(let e=t.length-1;e;e--)a=Math.floor(Math.random()*e),t[e]=t.splice(a,1,t[e])[0];return t}function closePop(e=null){let t=document.querySelector(".pop");gsap.to(t,.5,{opacity:0,onComplete:()=>{t.parentElement.removeChild(t),e&&e()}})}function getClose(){let e=getDiv("close ani_rotate"),t=new Image;return isMobile||(t.className="ani_rotates"),t.src="img/close.png",e.appendChild(t),e.onclick=()=>{closePop()},e}function findData(e,t){let a=[];if(e==authorData)for(var[n,i]of picData.entries())i.aid==t&&a.push(i);for(var[l,s]of e.entries())if(s.id==t)return s.paint=a,s;return null}function chkImg(e){let t=[];for(var[a,n]of[1,2,3].entries())e[`img${n}`]&&""!=e[`img${n}`]&&t.push(e[`img${n}`]);return t}function getPaintItem(i){let l=getDiv("paintItem"),e=getDiv("paint"),t=new Image;console.log(i),i.thumb&&""!=i.thumb?t.src=i.thumb:t.src=i.img[0].img,e.appendChild(t),l.appendChild(e);let a=getDiv("paintTitle");return"EN"==Language?a.innerHTML=i.title:a.innerHTML=i.ctitle,l.appendChild(a),l.onclick=()=>{let e=0;for(var[t,a]of picData.entries())if(i.id==a.id){e=t;break}let n=document.getElementById("author");n.style.zIndex="999",showPic(l,e,!1)},l}function showAuthor(r){if(!document.getElementById("author")){let p=findData(authorData,r);if(p){let e=getDiv("pop");e.id="author";let t=getDiv("pic"),a=new Image;a.src=p.img,t.appendChild(a);r=getDiv("mask");t.appendChild(r),e.appendChild(t);let n=getDiv("content"),i=getDiv("authorName");"EN"==Language?i.innerHTML=p.author:i.innerHTML=p.cauthor,n.appendChild(i),gsap.from(i,2,{x:100,opacity:0,delay:.5});let l=document.createElement("hr");l.style.opacity="0",n.appendChild(l),gsap.to(l,2,{delay:.5,opacity:.3});let s=getDiv("desc");if("EN"==Language?s.innerHTML=p.desc:s.innerHTML=p.cdesc,n.appendChild(s),gsap.from(s,2,{y:50,opacity:0,delay:2}),0<p.paint.length){let t=getDiv("paintList");for(var[c,g]of p.paint.entries()){let e=getPaintItem(g);e.style.opacity="0",gsap.to(e,2,{opacity:.5,delay:3+.1*c}),t.appendChild(e)}n.appendChild(t)}e.appendChild(n);r=getClose();e.appendChild(r);let o=getDiv("logo"),d=new Image;d.src="img/logo.svg",o.appendChild(d),e.appendChild(o),document.body.appendChild(e),gsap.from(e,.5,{opacity:0})}}}function showNews(e){var t=findData(newsData,e);let a=getDiv("pop");a.id="news";let n=getDiv("newsContainer"),i=getDiv("newsTitle");"EN"==Language?i.innerHTML=t.title:i.innerHTML=t.title_cn,n.appendChild(i),gsap.from(i,2,{x:100,opacity:0});e=document.createElement("hr");n.appendChild(e),gsap.from(e,2,{delay:.5,scaleX:0});let l=getDiv("newsDate");l.innerHTML=t.time,n.appendChild(l),gsap.from(l,2,{delay:1,x:100,opacity:0});let s;s=isMobile?getDiv("newsContent"):getDiv("newsContent3");let o="";o="EN"==Language?t.content:t.content_cn,s.innerHTML=o,gsap.from(s,2,{delay:2,opacity:0}),n.appendChild(s);let d=document.createElement("hr");d.className="hr2",n.appendChild(d),gsap.from(d,2,{delay:.5,scaleX:0}),a.appendChild(n);t=getClose();a.appendChild(t),document.body.appendChild(a),gsap.from(a,.5,{opacity:0})}function sizeChange(){w=window.innerWidth,h=window.innerHeight,scale=h/64,isMobile&&(scale=w/50),document.documentElement.style.fontSize=scale+"px",fp.stepHeight=h,fp.phyTouch.step=h,fpc.stepHeight=h,fpc.phyTouch.step=h;let e=document.getElementById("main");e.style.transform=`matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, ${-cid*h}, 0, 1)`;let t=document.getElementById("pic_content");t.style.transform=`matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, ${-sid*h}, 0, 1)`;let a=e.querySelectorAll(".section");for(var[n,i]of a.entries())i.style.height=h+"px";if(three){switch(three.camera.left=-w/2,three.camera.right=w/2,three.camera.top=h/2,three.camera.bottom=-h/2,three.camera.updateProjectionMatrix(),cid){case 3:case 4:case 7:case 8:break;default:var l,s;w,h;for([l,s]of boxes.entries())s.userData.pos||0===s.userData.pos||(s.userData.pos=s.position.x),s.position.x=s.userData.pos/1.3*w/h}three.renderer.setSize(w,h)}}isMobile&&(scale=w/50,.55<w/h&&(boxData.mobile[5][0].z=-200)),document.documentElement.style.fontSize=scale+"px";let Language="EN";$(".en").css("display",""),$(".cn").css("display","none");var picMap=[];for(let t=1;t<=8;t++){let e=`img/s${t}.jpg`;isMobile&&(e=`img/s1${t}.jpg`);const lc=(new THREE.TextureLoader).load(e);picMap.push(lc)}const blurBoxMat=(new THREE.TextureLoader).load("img/box.png"),shadowMat=(new THREE.TextureLoader).load("img/shadow.png"),shadowMat2=(new THREE.TextureLoader).load("img/shadow2.png");function init(){initMenu(),three=new com.Three(w,h),animate(),showBox(cid);let e=document.getElementById("menu");e.onclick=()=>{toggleMenu()},isMobile||(e.onmouseover=()=>{e.style.backgroundImage=isMenu?`url(img/ani1.gif?r=${Math.random()})`:`url(img/ani.gif?r=${Math.random()})`},e.onmouseout=()=>{e.style.backgroundImage=isMenu?"url(img/menu1.png)":"url(img/menu.png)"});let t=document.getElementById("menu_bg"),a=document.getElementById("menu_layer"),n=document.getElementById("menu_content"),i=n.getElementsByTagName("li");for(let t=0;t<i.length;t++){let e=Number(i[t].getAttribute("cid"));i[t].onclick=()=>{0<e&&e!=cid&&(toggleMenu(),fp.to(e))}}t.onanimationend=()=>{isMenu||(a.style.display="none")}}var isMenu=!1;let lang=document.querySelectorAll(".language")[0];function toggleMenu(){let e=document.getElementById("menu"),t=document.getElementById("menu_content"),a=document.getElementById("menu_layer"),n=document.getElementById("menu_bg"),i=document.getElementById("logo"),l=t.getElementsByTagName("li");if(isMenu){for(let e=0;e<l.length;e++)l[e].className="";n.className="animated zoomOut",cid!=menuMax-1&&(lang.style.webkitFilter="invert(0%)",i.style.webkitFilter="invert(0%)",e.style.webkitFilter="invert(0%)"),e.style.backgroundImage="url(img/menu.png)",t.style.opacity="1",gsap.to(t,.5,{opacity:0})}else{a.style.display="",n.className="animated zoomIn";for(let e=0;e<l.length;e++){var s=Number(l[e].getAttribute("cid"));l[e].style.visibility="hidden",setTimeout(()=>{l[e].style.visibility="",l[e].className="animated fadeInRight20"},100*e),l[e].style.color=s==cid?"#808080":"#FFF"}lang.style.webkitFilter="invert(100%)",i.style.webkitFilter="invert(100%)",e.style.webkitFilter="invert(100%)",e.style.backgroundImage="url(img/menu1.png)",t.style.opacity="0",gsap.to(t,.5,{opacity:1})}isMenu=!isMenu}let boxes=[],mats=[],val;function showBox(d){8<d&&(d%=8);let e=[],t;t=isMobile?(e=boxData.mobile[d],camPos.mobile[d]):(e=boxData.pc[d],camPos.pc[d]);let a=document.getElementById("three");a.style.opacity="0",gsap.killTweensOf(a),gsap.to(a,.5,{opacity:1}),three.camera.position.set(t.x,t.y,t.z),three.camera.lookAt(0,0,0),three.scene.background=new THREE.Color(16053492);let i,l;switch(d){case 0:var s=new THREE.SpriteMaterial({map:blurBoxMat,transparent:!0});const o=new THREE.Sprite(s);isMobile?(o.position.set(-400,0,-600),o.scale.set(600,600,10)):(o.position.set(-550,0,-500),o.scale.set(800,800,10)),boxes.push(o),three.scene.add(o);break;case 3:for(let t=0;t<20;t++){let e;isMobile?(i=150*(t-15),l=100*-(t-15)+100,e=getBox(120,13421772,!1),e.position.set(i,150,l),gsap.to(e.position,60,{x:i+1500,z:l-1e3,repeat:-1,ease:Linear.easeNone})):(i=400*(t-15),l=300*-(t-15),e=getBox(250,13421772,!1),e.position.set(i,150,l),gsap.to(e.position,60,{x:i+2e3,z:l-900,repeat:-1,ease:Linear.easeNone})),three.scene.add(e),boxes.push(e),e.material.opacity=.2}return void sizeChange();case 4:for(let t=0;t<20;t++){let e;isMobile?(i=150*(t-6),l=-120*(t-6)-300,10<=t&&(i=150*(t-16)+250,l=-120*(t-16)-200),e=getBox(80,13421772,!1),gsap.to(e.position,1,{delay:.2*t,y:40,ease:Back.easeOut})):(i=400*(t-6),l=-300*(t-6)-200,10<=t&&(i=400*(t-16)+300,l=-300*(t-16)+400),e=getBox(250,13421772,!1),gsap.to(e.position,1,{delay:.2*t,y:125,ease:Back.easeOut})),e.position.set(i,0,l),three.scene.add(e),e.rotation.y=Math.PI/180*40,e.scale.y=.001,e.visible=!1,gsap.set(e,{visible:!0,delay:.2*t}),gsap.to(e.scale,1,{delay:.2*t,y:1,ease:Back.easeOut}),e.material.opacity=.4,boxes.push(e)}return void sizeChange();case 6:const h=5;let a=()=>3e3*Math.random()-1500,n=(e=0)=>{const t=getBox(300+100*Math.random(),13421772,!1);return three.scene.add(t),gsap.fromTo(t.scale,h,{x:0,y:0,z:0},{delay:e,x:1,y:1,z:1}),gsap.fromTo(t.position,h,{x:0,y:0,z:0},{delay:e,x:a(),y:a(),z:Math.abs(a())}),gsap.fromTo(t.material,h,{opacity:1},{delay:e,opacity:0,onComplete:()=>{var e;6==cid&&(t.traverse(function(e){"Mesh"===e.type&&(e.geometry.dispose(),e.material.dispose())}),t.material.dispose(),t.geometry.dispose(),three.scene.remove(t),e=boxes.indexOf(t),boxes.splice(e,1),n())}}),boxes.push(t),t};return(()=>{for(let e=0;e<10;e++)n(e*h/10)})(),void sizeChange();case 7:for(let t=0;t<20;t++){let e;e=isMobile?(i=60*(t-10),l=-100*(t-10),getBox(80,13421772,!1)):(i=270*(t-10),l=100*(t-10),getBox(200,13421772,!1)),e.position.set(i,l,0),e.material.opacity=.2,three.scene.add(e),boxes.push(e)}return void sizeChange();case 8:for(let t=0;t<70;t++){let e;isMobile?(i=120*(t-60),l=70*(t-60),e=getBox(120,1973790,!1),e.position.set(i,l,0),gsap.to(e.position,120,{x:i+2400,y:l+1400,repeat:-1,ease:Linear.easeNone})):(i=200*(t-60),l=140*(t-60),e=getBox(200,1973790,!1),e.position.set(i,l,0),gsap.to(e.position,120,{x:i+2e3,y:l+1400,repeat:-1,ease:Linear.easeNone})),three.scene.add(e),boxes.push(e)}return three.scene.background=new THREE.Color(0),void sizeChange()}for(let[s,o]of e.entries())switch(o.type){case 1:let l;switch(d){case 1:let e=new THREE.Object3D;switch(s){case 0:l=getBox(o.size,16777215,!1);case 1:l=l||getBox(o.size,15724527,!1),e.position.set(o.x,o.y,o.z),l.scale.y=.001;var p=+s+2;l.material.opacity=0,gsap.to(e.position,2,{delay:p,y:o.y+o.size/2}),gsap.to(l.scale,2,{delay:p,y:1,ease:Back.easeOut,onStart:()=>{l.material.opacity=1}});break;case 2:l=getBox(o.size,13421772,!1),e.position.set(o.x,o.y,o.z),l.scale.y=.001,l.material.opacity=0,gsap.to(e.position,2,{delay:.2+.1*s,y:o.y+o.size/2,ease:Back.easeOut}),gsap.to(l.scale,2,{delay:.2+.1*s,y:1,ease:Back.easeOut,onStart:()=>{l.material.opacity=1}})}var r=new THREE.PlaneGeometry(1.65*o.size,1.65*o.size,10,10);const u=new THREE.Mesh(r,new THREE.MeshLambertMaterial({map:shadowMat2,color:10066329,transparent:!0}));u.position.set(-o.size/3*2,-o.size,0),u.rotation.x=-Math.PI/180*90,u.rotation.y=-Math.PI/180*5,u.material.opacity=0,e.add(u),gsap.to(u.material,2,{delay:4,opacity:1}),l.rotation.y=Math.PI/180*45,e.add(l),three.scene.add(e),boxes.push(e);break;case 2:l=getBox(o.size,13421772,!1);let a=new THREE.Object3D;picMap=shuffle(picMap);let n=[];for(let t=1;t<=6;t++){var c=new THREE.SpriteMaterial({map:picMap[t-1],transparent:!0});const f=new THREE.Sprite(c);isMobile?f.scale.set(60,60,1):f.scale.set(150,150,1);const w=[];switch(w.push(new THREE.Vector3(0,0,0)),t){case 1:f.position.x=1.3*o.size;break;case 2:f.position.x=1.3*-o.size;break;case 3:f.position.y=1.3*o.size;break;case 4:f.position.y=1.3*-o.size;break;case 5:f.position.z=1.3*o.size;break;case 6:f.position.z=1.3*-o.size}let e=f.position.clone();e.x*=5/7,e.y*=5/7,e.z*=5/7,w.push(e);var g=new THREE.LineBasicMaterial({color:16777215,transparent:!0,opacity:.5}),c=(new THREE.BufferGeometry).setFromPoints(w),g=new THREE.Line(c,g);a.add(g),a.add(f),n.push(f)}a.add(l),a.position.set(o.x,o.y+o.size/2,o.z),three.scene.add(a),boxes.push(l),boxes.push(a);let t=()=>{gsap.to(a.rotation,10,{x:Math.PI/180*360*Math.random(),y:Math.PI/180*360*Math.random(),z:Math.PI/180*360*Math.random(),ease:Quad.easeInOut,onComplete:()=>{picMap=shuffle(picMap);for(let[e,t]of n.entries())gsap.to(t.material,.25,{opacity:0,onComplete:()=>{t.parent&&(t.material.map=picMap[e],gsap.to(t.material,.25,{opacity:1}))}});t()}})};t();break;case 5:l=getBox(o.size,13421772,!1),l.material.opacity=.5,l.position.set(o.x,o.y+o.size/2,o.z),0==d&&(3!=s&&(l.material.opacity=.3),2!=s||(l.rotation.y=Math.PI/180*40)),three.scene.add(l),boxes.push(l);let i=()=>{let e=getMesh();e.position.set(0,1.5*o.size,0),gsap.to(e.position,8,{y:1.5*-o.size,ease:Linear.easeNone}),isMobile?gsap.to(e.scale,4,{x:150,y:150,z:150,ease:Quad.easeOut}):gsap.to(e.scale,4,{x:300,y:300,z:300,ease:Quad.easeOut}),gsap.to(e.material,2,{delay:2,opacity:.5,onComplete:()=>{gsap.to(e.scale,4,{x:0,y:0,z:0,ease:Quad.easeIn}),gsap.to(e.material,4,{opacity:.3,onComplete:()=>{gsap.killTweensOf(e.position),gsap.killTweensOf(e.scale),gsap.killTweensOf(e.material),e.traverse(function(e){"Mesh"===e.type&&(e.geometry.dispose(),e.material.dispose())}),e.parent&&e.parent.remove(e),e=null}})}}),l.add(e)};val=setInterval(()=>{i()},1e3),i();break;default:l=getBox(o.size,13421772,!1),l.position.set(o.x,o.y+o.size/2,o.z),0==d&&(3!=s?l.material.opacity=.3:l.material.opacity=.6,2!=s||(l.rotation.y=Math.PI/180*40)),three.scene.add(l),boxes.push(l);r=new THREE.PlaneGeometry(2*o.size,2*o.size,10,10);const y=new THREE.Mesh(r,new THREE.MeshLambertMaterial({map:shadowMat,transparent:!0}));y.position.set(o.x,o.y-o.size,o.z),y.rotation.x=-Math.PI/180*90,three.scene.add(y),boxes.push(y)}break;case 2:var n=new THREE.PlaneGeometry(o.size,o.size,100,100);const m=new THREE.Mesh(n,new THREE.MeshLambertMaterial({color:16053492,transparent:!0,opacity:1}));m.position.set(o.x,o.y,o.z),m.rotation.x=-Math.PI/180*90,m.receiveShadow=!0,three.scene.add(m),boxes.push(m)}sizeChange()}function getMesh(e=1){var t=new THREE.RingGeometry(1,1.002,720),e=new THREE.MeshBasicMaterial({color:9934743,side:THREE.DoubleSide,transparent:!0,opacity:e});const a=new THREE.Mesh(t,e);return a.rotation.x=Math.PI/180*90,a}function getShadow(e){var t=new THREE.PlaneGeometry(e,e,10,10),e=(new THREE.TextureLoader).load("img/shadow.png"),e=new THREE.MeshLambertMaterial({map:e,transparent:!0,opacity:1});return new THREE.Mesh(t,e)}function getBox(e,t=13421772,a=!0){e=new THREE.BoxGeometry(e,e,e),t=new THREE.MeshLambertMaterial({color:t,transparent:!0}),t=new THREE.Mesh(e,t);return t.castShadow=a,t}let moving=!1;function animate(){switch(cid){case 1:case 2:case 4:break;case 6:var e,t,a=Math.PI/180/5;for([e,t]of boxes.entries())t.geometry&&"BoxGeometry"===t.geometry.type&&(t.rotation.x-=a,t.rotation.y-=a,t.rotation.z-=a);break;case 7:for(var[n,i]of boxes.entries())i.geometry&&"BoxGeometry"===i.geometry.type&&(i.rotation.z-=Math.PI/180/10);break;case 8:break;case 3:for(var[l,s]of boxes.entries())s.geometry&&"BoxGeometry"===s.geometry.type&&(s.rotation.y-=Math.PI/180/20);break;default:for(var[o,d]of boxes.entries())d.geometry&&"BoxGeometry"===d.geometry.type&&(d.rotation.y-=Math.PI/180/4)}three.renderer.render(three.scene,three.camera),requestAnimationFrame(animate)}function toPage(e){clearInterval(val),val=setInterval(()=>{flip(e)},8e3),flip(e)}function flip(a=1){let n=200;isMobile&&(n=100);let i=$(".pic_container"),l=0,s=Math.ceil(picData.length/4);i.each((e,t)=>{""==t.style.display&&(l=e+a,l>=s&&(l=0),l<0&&(l=s-1),gsap.to(t,.5,{x:-n*a,opacity:0,onComplete:()=>{t.style.display="none",t.style.opacity=1;let e=i.eq(l)[0];e.style.display="",gsap.fromTo(e,.5,{opacity:0,x:n*a,y:0},{x:0,opacity:1}),document.getElementById("page_count").innerText=`${l+1} / ${s}`}}))})}var old=0,cid=0,fp=new window.PhyTouch.FullPage("#main",{animationEnd:()=>{var e=Math.ceil(picData.length/4);3==cid&&1<e&&clearInterval(val)},leavePage:e=>{clearInterval(val),moving=!0;for(let[e,t]of mats.entries())gsap.to(t.material,.05,{opacity:0,onComplete:()=>{gsap.killTweensOf(t.scale),gsap.killTweensOf(t.position),gsap.killTweensOf(t.rotation),gsap.killTweensOf(t.material),gsap.killTweensOf(t),t.traverse(function(e){"Mesh"===e.type&&(e.geometry.dispose(),e.material.dispose())}),t.material.dispose(),t.geometry.dispose(),t.parent&&t.parent.remove(t),mats.splice(mats.indexOf(t),1)}});for(let[e,t]of boxes.entries())gsap.to(t.material,.1,{opacity:0,onComplete:()=>{gsap.killTweensOf(t.scale),gsap.killTweensOf(t.position),gsap.killTweensOf(t.rotation),gsap.killTweensOf(t.material),gsap.killTweensOf(t),t.traverse(function(e){"Mesh"===e.type&&(e.geometry.dispose(),e.material.dispose())}),t.material&&t.material.dispose(),t.geometry&&t.geometry.dispose(),t.parent&&t.parent.remove(t),boxes.splice(boxes.indexOf(t),1)}});var t=document.getElementById("three");gsap.killTweensOf(t),gsap.to(t,.2,{opacity:0})},beginToPage:e=>{switch(moving=!1,old=cid,cid=e,clearTimeout(timeout),timeout=setTimeout(()=>{showBox(cid)},250),cid){case 0:three.hide(),lang.style.webkitFilter="invert(0%)",document.getElementById("logo").style.webkitFilter="invert(0%)",document.getElementById("menu").style.webkitFilter="invert(0%)";break;case 8:three.hide(),lang.style.webkitFilter="invert(100%)",document.getElementById("logo").style.webkitFilter="invert(100%)",document.getElementById("menu").style.webkitFilter="invert(100%)";break;default:three.show(),lang.style.webkitFilter="invert(0%)",document.getElementById("logo").style.webkitFilter="invert(0%)",document.getElementById("menu").style.webkitFilter="invert(0%)"}}}),timeout=0;function prev(){0!=sid&&(--sid,fpc.to(sid))}function next(){var e=picData.length;sid!=e-1&&(sid++,fpc.to(sid))}var sid=0,fpc=new window.PhyTouch.FullPage("#pic_content",{animationEnd:()=>{},leavePage:e=>{},beginToPage:a=>{sid=a,document.getElementById("page").innerText=`${a+1}`,$("#pic_content .section").each((e,t)=>{e==a?$(t).css("visibility",""):$(t).css("visibility","hidden")})}});function changeLanguage(e="EN"){Language=e,"EN"===Language?($(".en").css("display",""),$(".cn").css("display","none")):($(".en").css("display","none"),$(".cn").css("display",""))}fpc.phyTouch.touchStart=e=>{var t=e.target,a=$(t).height();t.scrollHeight>a+10&&(fpc.phyTouch.isTouchStart=!1,e.stopPropagation())},fpc.duration=.1;var com,popSwiper=new window.Swiper(".swiper-container",{direction:"horizontal",loop:!1,mousewheel:!0,pagination:{el:".swiper-pagination",clickable:!0}}),iconSwiper=new window.Swiper("#indexIcon",{direction:"horizontal",loop:!0,autoplay:!0,speed:250,delay:1e3});function hidePop(){let e=document.getElementById("indexPop");gsap.to(e,.5,{opacity:0,display:"none"});let t=e.querySelectorAll("video");for(var[a,n]of t.entries())n.paused||n.pause()}function showPop(e=0){let t=document.getElementById("indexPop");t.style.left="0",t.style.display="",t.style.opacity="0",gsap.to(t,.5,{delay:e,opacity:1})}window.onload=()=>{if(init(),three.hide(),sizeChange(),$("#pic_content .pic").each((e,n)=>{let l=picData[e],s=!!picData[e].sold&&1==picData[e].sold;if(1<l.img.length){$(n).empty();let i=document.createElement("div");i.className="pic_show",$(n).append(i),l.img.map((t,e)=>{let a=document.createElement("div"),n=new Image;if(n.src=t.img,a.appendChild(n),t.isVideo){a.className="hand";let e=new Image;e.className="video",e.src="img/pop_ico1.png",a.appendChild(e),a.onclick=()=>{window.open(t.video,"_balnk")}}if(s){let e=new Image;e.className="sold multi cn",e.src="img/sold_cn.png",a.appendChild(e);let t=new Image;t.className="sold multi en",t.src="img/sold.png",a.appendChild(t),"EN"==Language?e.style.display="none":t.style.display="none"}i.appendChild(a)}),isMobile||(n.style.width="40%")}else{let a=new Image;if(a.src=$(n).text(),$(n).empty(),l.img[0].isVideo){let e=document.createElement("div");e.className="videoDiv hand",e.appendChild(a);let t=new Image;t.className="video",t.src="img/pop_ico1.png",e.appendChild(t),$(n).append(e),e.onclick=()=>{window.open(l.img[0].video,"_balnk")}}else $(n).append(a);isMobile||(a.onload=()=>{a.naturalWidth/w/.32>a.naturalHeight/h/.75?a.style.width="32vw":a.style.height="75vh"}),s&&("EN"==Language?($(n).append('<img class="sold en" src="img/sold.png" />'),$(n).append('<img class="sold cn" style="display:none" src="img/sold_cn.png" />')):($(n).append('<img class="sold en" style="display:none" src="img/sold.png" />'),$(n).append('<img class="sold cn" src="img/sold_cn.png" />')))}}),$(".pic_show div").each((e,t)=>{var a=t.parentElement.children.length;isMobile?$(t).css("zIndex",e):$(t).css("zIndex",e+200),$(t).attr("data-id",e%a),$(t).css("top",`${5*e}%`),$(t).css("left",`${5*e}%`)}),isMobile||($(".pic_div div").hover3d({selector:"img:first-of-type",sensitivity:20}),$(".authorBox div").hover3d({selector:"img",sensitivity:20})),document.getElementById("language").onclick=()=>{"CN"===Language?changeLanguage("EN"):changeLanguage("CN")},redirect.boo){"cn"===redirect.lan&&changeLanguage("CN");for(var[e,t]of menuData[redirect.lan].entries())e==redirect.id&&fp.to(t.id)}!function(){const e=$(".pic_show");e.map((e,l)=>{let s=()=>{let i=l.children.length;for(let n=0;n<i;n++){let t=$(l.children[n]),a=Number(t.attr("data-id")),e={delay:2.5,top:5*(a+1)+"%",left:5*(a+1)+"%",opacity:1,onComplete:()=>{let e=a+1;e>i-1&&(e=0),isMobile?t.css("zIndex",e):t.css("zIndex",e+200),t.attr("data-id",e),t.css("opacity",1),0==e&&(t.css("top","-5%"),t.css("left","-5%"),t.css("opacity",0),gsap.to(t,.5,{top:"0%",left:"0%",opacity:1,onComplete:()=>{s()}}))}};a==i-1&&(e.opacity=0),gsap.to(t,.5,e)}};s()})}();new window.Swiper("#P1Swiper",{observer:!0,observeParents:!0,noSwiping:!0,autoplay:!0,pagination:{el:".swiper-pagination",clickable:!0}}),new window.Swiper("#P1Button",{observer:!0,observeParents:!0,noSwiping:!0});let a=document.getElementById("main");a.style.display="",document.querySelector(".language").style.display="",document.getElementById("menu").style.display=""},window.addEventListener("resize",sizeChange),window.onresize=()=>{sizeChange()},sizeChange(),function(e){e.Three=class{constructor(e,t){var a=new THREE.OrthographicCamera(e/-2,e/2,t/2,t/-2,.1,1e4);this.camera=a;const n=new THREE.Scene;n.add(new THREE.AmbientLight(16711422,.9)),this.scene=n;const i=new THREE.DirectionalLight(16777215,.9);i.position.set(300,350,-100),n.add(i),this.light=i,n.background=new THREE.Color(16053492),n.add(a);const l=new THREE.WebGLRenderer({antialias:!0,alpha:!0});l.setSize(e,t),l.domElement.id="three",l.setPixelRatio(window.devicePixelRatio),document.body.appendChild(l.domElement),this.renderer=l}show(){}hide(){}}}(com=com||{});